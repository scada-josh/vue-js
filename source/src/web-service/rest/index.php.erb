---
title: Learning Vue.js
layout: "layout-api"
---

<?php
 
    date_default_timezone_set("Asia/Bangkok");
 
    require_once '../../../packages/autoload.php';
 
    // Create and configure Slim app
    /* Slim framework 2.x */
    // $app = new \Slim\Slim();
    $logWriter = new \Slim\LogWriter(fopen('./api-debug.log', 'a'));
    $app = new \Slim\Slim(array('log.enabled' => true,
                                'log.writer' => $logWriter,
                                'debug' => true));


<% if config[:phase_environment] == "Development" %>

    /* Connect Database Manager Partial : Localhost */
    <%= partial "/ConnectDatabase/_connectDB2_Localhost" %>
    <%= partial "/ConnectDatabase/_connectMySQL_Localhost" %>
    <%= partial "/ConnectDatabase/_connectSQLite_Localhost" %>

<% elsif config[:phase_environment] == "Test" %>

    /* Connect Database Manager Partial : Localhost */
    <%= partial "/ConnectDatabase/_connectDB2_Localhost" %>
    <%= partial "/ConnectDatabase/_connectMySQL_Localhost" %>
    <%= partial "/ConnectDatabase/_connectSQLite_Localhost" %>

<% elsif config[:phase_environment] == "Production" %>

    /* Connect Database Manager Partial : Production */
    <%= partial "/ConnectDatabase/_connectDB2_Production" %>
    <%= partial "/ConnectDatabase/_connectMySQL_Production" %>
    <%= partial "/ConnectDatabase/_connectSQLite_Production" %>

<% end %>



    /* Test Manager */
    $app->get('/testManager/getMsg/:name',function($name) use ($app) { getMsg($app, $name); });



    $app->get('/hello/:name', function ($name) use ($app, $db_sqlite) {

        $request = $app->request;
        $response = $app->response;

        // $app->log->debug('Request path: ' . $request->getPathInfo());
        // $app->log->debug('Response status: ' . $response->getStatus());



        $results = $db_sqlite->stories;
 
        // $return_m = array("msg" => "สวัสดี");
        $return_m = array("msg" => "สวัสดี, $name");
 
        $app->response()->header("Content-Type", "application/json");
        // echo json_encode($return_m);
        echo json_encode($results);
    });
 
    // Run app
    $app->run();
 
    /* Test Manager Partial */
    <%= partial "/TestManager/_getMsg" %>



?>